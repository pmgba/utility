!function(){function a(a,b,c,d,e,f,g){var h="";return h+='<table class="rcrow">',h+="<tr>",h+='<td class="rcrow-action">'+a+"</td>",h+='<td class="rcrow-time">'+d+"</td>",h+='<td class="rcrow-log">'+b+c+"  "+e+"</td>",h+='<td class="rcrow-user">'+f+"</td>",h+='<td class="rcrow-comment">'+g+"</td>",h+="</tr></table>"}function b(a){if(a.length>0){var b="";return $.each(a,function(a,c){b+=c.outerHTML}),b}return""}mw.util.addCSS(".rcrow { width:100%; border-collapse: collapse; white-space: nowrap; }.rcrow-action { width:40px; text-align:center; }.rcrow-time { width:50px; }.rcrow-log { width:40%; }.rcrow-comment { display: inline-block; width: 400px; overflow: hidden; text-overflow: ellipsis; }.rcrow-user { width:110px; }.special { list-style-image : none; list-style-type : none; margin-left : 0; }.mw-logline { background : #F3F3F3; border : 1px solid #E6E6E6;border-left-width: 4px; border-radius : 0.35em; margin : 0.3em 0;}.mw-logline-edit { background   : #f2f8ff; border-color : #A3D3FF;}.mw-logline-newpage {\tbackground   : #D8ECFF;\tborder-color : #70bbff;}.mw-logline-newusers {\tbackground   : #ddffbb;\tborder-color : #88aa66;}.mw-logline-upload {\tbackground   : #e8d4ff;\tborder-color : #b26eff;}.mw-logline-move {\tbackground   : #ffebd8;\tborder-color : #ffc487;}.mw-logline-delete {\tbackground   : #ffd4d4;\tborder-color : #ff5555;}.mw-logline-protect {\tbackground   : #dedde2;\tborder-color : #bbc4d3;}"),$(".special li:not(.mw-logline)").each(function(){var c=$(this);c.addClass("mw-logline");var d=c.html(),e=c.text().match(/^（(.+?)）/)[1],f=d.match(/^（(.+?a>)）/)[1],g="",h=b($(".mw-changeslist-date",c)),i=b($(".mw-plusminus-pos, .mw-plusminus-neg, .mw-plusminus-null",c)),j=b($(".mw-userlink:last",c)),k=b($(".comment",c)),l=(b($(".mw-rollback-link",c)),b($("abbr",c)));if("差异 | 历史"==e)e="编辑",c.addClass("mw-logline-edit"),$(".newpage",c).length>0&&(c.addClass("mw-logline-newpage"),e="新建"),f.indexOf("diff=")>-1&&(i=f.match(/(<a.+?>)差异<\/a>/)[1]+i+"</a>"),f=f.match(/(?:<a.+?)*(<a.+?>)历史<\/a>/)[1]+e+"</a>",g=b($(".mw-title",c));else if("用户创建日志"==e)f=f.replace(e,"用户"),g="创建账户",c.addClass("mw-logline-newusers");else if("上传日志"==e){f=f.replace(e,"上传");var m=d.match(/上传(<a(.+?)a>)(的新版本)*/);g=m[1],m[2]&&(g='<abbr class="newpage" title="该编辑创建了新页面">新</abbr>'+g),c.addClass("mw-logline-upload")}else"移动日志"==e?(f=f.replace(e,"移动"),g=d.match(/移动页面<a(.+?)a>至<a(.+?)a>/)[0],c.addClass("mw-logline-move")):"删除日志"==e?(f=f.replace(e,"删除"),g=d.match(/(..)页面<a(.+?)a>( <span.+?span>)*/)[0],c.addClass("mw-logline-delete")):"保护日志"==e?(f=f.replace(e,"保护"),g=d.match(/(保护了|解除了)<a(.+?)a>/)[0],c.addClass("mw-logline-protect")):"封禁日志"==e&&(f=f.replace(e,"封禁"),g=d.match(/封禁了<a(.+)‎/)[0],c.addClass("mw-logline-protect"),j=b($(".mw-userlink:first",c)));c.html(a(f,l,g,h,i,j,k))})}();