poketoruDex={init:function(){$.extend(!0,pw.poketoru,{skillOrder:[72,76,159,45,51,52,1,2,46,3,67,71,118,121,120,86,111,4,47,119,115,116,117,112,113,5,48,122,90,114,73,74,75,110,9,40,153,41,144,42,143,150,43,152,44,66,92,151,84,37,88,36,38,87,145,156,26,93,39,154,155,20,149,147,146,148,6,10,11,123,89,12,14,13,15,16,81,82,99,100,101,102,105,106,107,68,80,103,108,104,50,77,78,109,79,17,131,18,130,49,83,19,128,69,70,129,127,7,126,8,124,85,125,163,21,22,23,30,54,55,132,160,31,56,57,135,32,58,59,140,142,141,33,60,61,91,139,138,34,62,63,137,136,161,24,25,133,134,162,27,28,53,29,35,64,65,98,94,157,95,158,96,97],maxExp:[[],[0,50,100,150,150,450,750,900,1050,1200,1350,1050,1500,1800,2100,2250,2400,2550,2700,3e3,3150,3300,3450,3600,3750,3900,4050,4200,4350,4500],[0,55,110,165,165,495,825,990,1155,1320,1485,1155,1650,1980,2310,2475,2640,2805,2970,3300,3465,3630,3795,3960,4125,4290,4455,4620,4785,4950],[0,60,120,180,180,540,900,1080,1260,1440,1620,1260,1800,2160,2520,2700,2880,3060,3240,3600,3780,3960,4140,4320,4500,4680,4860,5040,5220,5400],[0,65,130,195,195,585,975,1170,1365,1560,1755,1365,1950,2340,2730,2925,3120,3315,3510,3900,4095,4290,4485,4680,4875,5070,5265,5460,5655,5850],[0,70,140,210,210,630,1050,1260,1470,1680,1890,1470,2100,2520,2940,3150,3360,3570,3780,4200,4410,4620,4830,5040,5250,5460,5670,5880,6090,6300],[0,75,150,225,225,675,1125,1350,1575,1800,2025,1575,2250,2700,3150,3375,3600,3825,4050,4500,4725,4950,5175,5400,5625,5850,6075,6300,6525,6750],[0,80,160,240,240,720,1200,1440,1680,1920,2160,1680,2400,2880,3360,3600,3840,4080,4320,4800,5040,5280,5520,5760,6e3,6240,6480,6720,6960,7200]],superEffects:[],skillPokemonCount:[],typePokemonCount:[],sePokemonCount:[]}),mw.util.addCSS(".shuffledex { min-height: 600px;}.shuffle-data .row + .row { border-top: 1px dotted #ddd; }.shuffle-data .row { padding:3px; text-align:center;}.shuffle-table { font-size:small;width:100%;text-align:center;border: 1px solid #ddd;border-spacing: 0;border-collapse: collapse; table-layout:fixed; margin-bottom:1em; }.shuffle-table td { border-top: 1px solid #ddd; border-bottom: 1px solid #ddd; }.shuffledex-edit[type=radio] { position: absolute; }.shuffledex-edit:not(:checked) { display: none; }.shuffledex-editparent:hover .shuffledex-edit { display: inline; }");for(var a=0;a<18;a++){pw.poketoru.superEffects[a]=[],pw.poketoru.typePokemonCount[a]=0,pw.poketoru.sePokemonCount[a]=0;for(var b=0;b<18;b++)2==pw.poketoru.typeEffects[b][a]&&pw.poketoru.superEffects[a].push(b)}for(var c=0;c<=pw.poketoru.skillOrder.length;c++)pw.poketoru.skillPokemonCount.push(0);$.each(pw.poketoru.pokemonData,function(a,b){var c=pw.poketoru.getPokemonData(a);c.isMega||$.each(c.skills,function(a,b){pw.poketoru.skillPokemonCount[b]+=1}),pw.poketoru.typePokemonCount[c.type]+=1,$.each(pw.poketoru.superEffects[c.type],function(a,b){pw.poketoru.sePokemonCount[b]+=1})}),poketoruDex.createContent()},createContent:function(){var a='<div class="card border-primary shuffledex"><div class="card-header border-primary bg-primary"><div class="nav nav-tabs card-header-tabs">\t<a class="nav-item nav-link shuffledex__searchnav active" data-toggle="tab" href="#shuffledex-searchtab">搜索</a>\t<a class="nav-item nav-link shuffledex__pokemonnav" data-toggle="tab" href="#shuffledex-pokemontab">宝可梦</a></div></div><div class="card-body"><div class="container-fluid"><div class="tab-content">\t<div class="tab-pane fade show active" id="shuffledex-searchtab"><div class="row">\t\t<div class="col-12 col-lg-3">\t\t\t<div class="form-group row">\t\t\t\t<label class="col-4 control-label">排序方式</label>\t\t\t\t<div class="col-8"><select class="form-control" name="shuffledex-sort">\t\t\t\t\t<option value="0">编号</option>\t\t\t\t\t<option value="1">等级</option>\t\t\t\t\t<option value="2">满级攻击力</option>\t\t\t\t\t<option value="3">属性</option>\t\t\t\t</select></div>\t\t\t</div>\t\t\t<div class="form-group row">\t\t\t\t<label class="col-4 control-label">属性</label>\t\t\t\t<div class="col-8"><select class="form-control" name="shuffledex-type">\t\t\t\t\t<option value="-1">-</option>'+function(){for(var a="",b=0;b<pw.database.types.names["zh-cn"].length;b++)a+='<option value="'+b+'">'+pw.database.types.names["zh-cn"][b]+"</option>";for(var b=0;b<pw.database.types.names["zh-cn"].length;b++)a+='<option value="'+(b+100)+'">克制'+pw.database.types.names["zh-cn"][b]+"</option>";return a}()+'\t\t\t\t</select></div>\t\t\t</div>\t\t\t<div class="form-group row">\t\t\t\t<label class="col-4 control-label">能力</label>\t\t\t\t<div class="col-8"><select class="form-control" name="shuffledex-skill">\t\t\t\t\t<option value="-1">-</option>'+function(){for(var a="",b=0;b<pw.poketoru.skillOrder.length;b++)a+='<option value="'+pw.poketoru.skillOrder[b]+'">'+pw.poketoru.skillList[pw.poketoru.skillOrder[b]][0]+"</option>";return a}()+'\t\t\t\t</select></div>\t\t\t</div>\t\t\t<div class="form-group row">\t\t\t\t<label class="col-4 control-label">基础攻击力</label>\t\t\t\t<div class="col-8"><select class=" form-control" name="shuffledex-attack"><option value="-1">-</option>\t\t\t\t\t<option value="1">30</option>\t\t\t\t\t<option value="2">40</option>\t\t\t\t\t<option value="3">50</option>\t\t\t\t\t<option value="4">60</option>\t\t\t\t\t<option value="5">70</option>\t\t\t\t\t<option value="6">80</option>\t\t\t\t\t<option value="7">90</option>\t\t\t\t</select></div>\t\t\t</div>\t\t\t<div class="form-group row">\t\t\t\t<label class="col-4 control-label">最大等级提升</label>\t\t\t\t<div class="col-8"><select class=" form-control" name="shuffledex-rml"><option value="-1">5</option>\t\t\t\t\t<option value="10">≥10</option>\t\t\t\t\t<option value="15">≥15</option>\t\t\t\t\t<option value="20">≥20</option>\t\t\t\t</select></div>\t\t\t</div>\t\t\t<div class="form-group row">\t\t\t\t<label class="col-4 control-label">超级进化</label>\t\t\t\t<div class="col-8"><div class="checkbox"><label><input type="checkbox" name="shuffledex-ismega"> 有</label></div></div>\t\t\t</div><hr />\t\t\t<div class="form-group row">\t\t\t\t<label class="col-4 control-label"></label>\t\t\t\t<div class="col-8"><button type="button" class="btn btn-primary m-1 shuffledex__search">搜索</button><button type="button" class="btn btn-default m-1 shuffledex__reset">重置</button></div>\t\t\t</div>\t</div>\t\t<div class="col-12 col-lg-9 shuffledex__resultcontainer" style="overflow-y: auto;max-height: 500px;">\t\t<table class="table table-sm text-center shuffledex-result">\t\t\t<thead>\t\t\t\t<tr><th>编号</th><th>图标</th><th>宝可梦</th><th>属性</th><th>基础攻击力</th><th>最大等级提升</th><th>最大攻击力</th><th>初始能力</th></tr>\t\t\t</thead>\t\t\t<tbody>\t\t\t</tbody>\t\t</table>\t\t</div></div></div>\t\t<div class="tab-pane fade" id="shuffledex-pokemontab">\t\t</div>\t\t</div>\t\t</div>\t\t</div>';$(".pw-jscontent, #shuffledex").html(a),$(".shuffledex__search").click(poketoruDex.searchClick),$(".shuffledex__reset").click(poketoruDex.resetClick)},searchClick:function(){var a=parseInt($("select[name=shuffledex-type]").val(),10),b=parseInt($("select[name=shuffledex-skill]").val(),10),c=parseInt($("select[name=shuffledex-attack]").val(),10),d=parseInt($("select[name=shuffledex-rml]").val(),10),e=$("input[name=shuffledex-ismega]").is(":checked"),f=parseInt($("select[name=shuffledex-sort]").val(),10);if(-1!=a||-1!=b||-1!=c||-1!=d||e){var g=a>=100;if(g){a-=100;var h=pw.poketoru.superEffects[a]}var i="",j=0,k=[];if($.each(pw.poketoru.pokemonList,function(f,i){if(!i.isMega&&!(b>=0&&-1==$.inArray(b,i.skills)||c>=0&&i.category!=c)){if(g){if(-1==$.inArray(i.type,h))return}else if(a>=0&&i.type!=a)return;d>-1&&(i.rml||0)<d||e&&!i.hasMega||(i.maxPower=pw.poketoru.maxPower[i.category][10+(i.rml||0)],k.push(i),j+=1)}}),k.length>500)return void alert("something wrong");1==f?k.sort(function(a,b){return b.maxLevel-a.maxLevel}):2==f?k.sort(function(a,b){return b.maxPower-a.maxPower}):3==f&&k.sort(function(a,b){return a.type-b.type});var l=-1,m=0;$.each(k,function(a,b){var c=b.id,d=c.split(".")[0],e=pw.poketoru.skillList[b.skills[0]][0],g=[d,b.maxLevel,b.maxPower,b.type][f];-1!=l&&l==g||(m=0==m?1:0),l=g;var h=pw.util.getPokemonName(c).fullname.replace(/[（）]/g,"～");h=h.replace(/～(.+?)～/,'<div style="line-height: 12px;font-size: 12px;transform: scale(0.7);">$1</div>'),h='<a href="#" class="shuffledex-pkmnlink" data-pid="'+c+'">'+h+"</a>",i+='<tr style="'+(m?"":"background-color:#f2f2f2;")+'"><td>'+b.dex+'</td><td><img class="shufflepokemon" src="'+pw.poketoru.getPoketoruIconSrc(c)+'" data-pid="'+c+'" style="width:32px;" /></td><td>'+h+"</td><td>"+pw.util.createColorlabel("span","type",b.type,null,"colorlabel-fixed")+"</td><td>"+pw.poketoru.maxPower[b.category][1]+"</td><td>"+(b.rml?"+"+b.rml:"-")+"</td><td>"+b.maxPower+"</td><td>"+e+"</td></tr>"}),$(".shuffledex-result tbody").html(i),$("#shuffledex-resultcount").html(j),pw.poketoru.createPoketoruTooltips(),$(".shuffledex-pkmnlink").click(function(){return poketoruDex.createPokemonPage($(this).data("pid").toString()),!1})}},resetClick:function(){$("select[name=shuffledex-type]").val(-1),$("select[name=shuffledex-skill]").val(-1),$("select[name=shuffledex-attackpower]").val(-1),$("select[name=shuffledex-rml]").val(-1),$("input[name=shuffledex-ismega]").attr("checked",!1)},createPokemonPage:function(a){var b='<div class="row">\t\t<div class="col-12 col-md-4" style="padding:0 1em;">\t\t\t<h3>{pkmnname}</h3>\t\t\t<div>\t\t\t<div class="col-4">{pkmnicon}</div>\t\t\t<div class="col-8 shuffle-data">\t\t\t\t<div class="row"><div class="col-4">推荐度</div><div class="col-8">{pkmnrank}</div></div>\t\t\t\t<div class="row"><div class="col-4">属性</div><div class="col-8">{pkmntype}</div></div>\t\t\t\t<div class="row"><div class="col-4">攻击力</div><div class="col-8">{pkmnattack}</div></div>\t\t\t\t<div class="row"><div class="col-4">最大等级</div><div class="col-8"><img src="/w/images/thumb/b/b9/Shuffle_Raise_Max_Level.png/32px-Shuffle_Raise_Max_Level.png" width="16" height="16">0/{pkmnrml}</div></div>\t\t\t</div>\t\t\t</div>{pkmnmega}{pkmnform}\t\t</div>\t\t<div class="col-12 col-md-4" style="padding:0 1em;">\t\t\t<h3>能力</h3>\t\t\t{pkmnskills}\t\t</div>\t\t<div class="col-12 col-md-4" style="padding:0 1em;">\t\t\t<h3>攻击力</h3>\t\t\t<table class="shuffle-table">\t\t\t<tr>\t\t\t\t<th>等级</th><th>攻击力</th><th>攻击力增加</th><th>升级经验</th><th>总经验</th>\t\t\t</tr>\t\t\t{pkmnlevels}\t\t</div>\t</div>',c=a.split(".")[0],d=(a.split(".")[1],pw.poketoru.getPokemonData(a));d.isMega&&($.each(pw.poketoru.megaList,function(b,c){if($.inArray(a,c)>-1)return a=b,!1}),d=pw.poketoru.getPokemonData(a));var e=10+(d.rml||0),f=pw.poketoru.maxPower[d.category][1]+"～"+pw.poketoru.maxPower[d.category][10];d.rml&&(f+="～"+pw.poketoru.maxPower[d.category][e]),b=b.replace("{pkmnicon}",'<img src="'+pw.poketoru.getPoketoruIconSrc(a)+'" />'),b=b.replace("{pkmntype}",pw.util.createColorlabel("span","type",d.type,null,"colorlabel-fixed")),b=b.replace("{pkmnname}",pw.util.getPokemonName(a).fullname.replace(/[（）]/g,"～")),b=b.replace("{pkmnattack}",f),b=b.replace("{pkmnrank}",d.rank),b=b.replace("{pkmnrml}",d.rml||0);for(var g="",h=0,i=1;i<=e;i++){1!=i&&11!=i&&16!=i&&21!=i&&26!=i||(g+='<tr><td colspan="5" style="border-bottom:1px solid #ddd;"></td>');var j='<input class="shuffledex-edit" name="shuffledex-editlevel" type="radio" value="'+i+'"/>',k=pw.poketoru.maxPower[d.category][i],l=i>1?"+"+(k-pw.poketoru.maxPower[d.category][i-1]):"-",m=i>1?pw.poketoru.maxExp[d.category][i-1]:0;h+=m,g+='<tr class="shuffledex-editparent"><td>'+i+j+"</td><td>"+k+"</td><td>"+l+"<td>"+(m||"-")+"</td><td>"+(h||"-")+"</td>"}b=b.replace("{pkmnlevels}",g);var n="";$.each(d.skills,function(a,b){var c=($(pw.poketoru.skillHtml),pw.poketoru.skillList[b][0]),e=pw.poketoru.skillList[b][2];c='<a href="#" class="shuffledex-searchlink" data-skill="'+b+'">'+c+"</a>",a>0&&(c='<img src="/w/images/thumb/e/e1/Shuffle_Skill_Swapper.png/24px-Shuffle_Skill_Swapper.png" />'+c);var f=(e[1]>0?e[1]+"%":"-")+" / "+(e[2]>0?e[2]+"%":"-")+" / "+(e[3]>0?e[3]+"%":"-"),g=["-","-","-","-"],h=["-","-","-","-"];if(1==e[4])g[0]="+"+e[5]+"%",g[1]="+"+e[6]+"%",g[2]="+"+e[7]+"%",g[3]="+"+e[8]+"%";else if(2==e[4])for(var i=0;i<=3;i++){var j=d.maxPower*e[0]*e[5+i];d.type>0&&(j*=2),9==b&&(j*=3),h[i]='<span title="'+(e[1]>0?Math.round(j):"-")+" / "+(e[2]>0?Math.round(1.5*j):"-")+" / "+(e[3]>0?Math.round(2*j):"-")+'">×'+e[5+i]+"</span>"}n+='<div style="border-left:3px solid silver;padding: 0 0 0 3px; margin: 0.5em 0;line-height:24px;"><b>'+c+'</b><div style="float:right;font-size:small;">'+pw.poketoru.skillList[b][1]+"</div></div>",n+='<table class="shuffle-table">',n+='<tr class="shuffledex-editparent"><th style="width:25%;">等级</th>',n+='<th style="width:25%;">1<input class="shuffledex-edit" name="shuffledex-editskill" type="radio" value="'+b+'.1" /></th>',n+='<th>2<input class="shuffledex-edit" name="shuffledex-editskill" type="radio" value="'+b+'.2" /></th>',n+='<th>3<input class="shuffledex-edit" name="shuffledex-editskill" type="radio" value="'+b+'.3" /></th>',n+='<th>4<input class="shuffledex-edit" name="shuffledex-editskill" type="radio" value="'+b+'.4" /></th>',n+='<th>5<input class="shuffledex-edit" name="shuffledex-editskill" type="radio" value="'+b+'.5" /></th>',n+="<tr><td>发动几率</td><td>"+f+"</td><td>"+g[0]+"</td><td>"+g[1]+"</td><td>"+g[2]+"</td><td>"+g[3]+"</td></tr>",n+="<tr><td>伤害倍率</td><td>"+e[0]+"</td><td>"+h[0]+"</td><td>"+h[1]+"</td><td>"+h[2]+"</td><td>"+h[3]+"</td></tr>",n+="<tr><td>升级经验</td><td>-</td><td>"+e[9]+"</td><td>"+e[10]+"</td><td>"+e[11]+"</td><td>"+e[12]+"</td></tr>",n+="</table>"}),b=b.replace("{pkmnskills}",n);var o="";d.hasMega&&$.each(pw.poketoru.megaList[a],function(a,b){var c=pw.poketoru.getPokemonData(b),d=pw.poketoru.megaEffects[c.skills[0]].replace("$1",c.name);o+="<h3>"+pw.util.getPokemonName(b).fullname.replace(/[（）]/g,"～")+"</h3>",o+='<div class="row">',o+='<div class="col-4"><img src="'+pw.poketoru.getPoketoruIconSrc(b)+'" /></div>',o+='<div class="col-8 shuffle-data">',o+='<div class="row"><div class="col-4">属性</div><div class="col-8">'+pw.util.createColorlabel("span","type",c.type,null,"colorlabel-fixed")+"</div></div>",o+='<div class="row"><div class="col-4">超级进化速度</div><div class="col-8">'+c.mb+"</div></div>",o+='<div class="row shuffledex-editparent"><div class="col-4">超级进化加速</div><div class="col-xs-1"></div><div class="col-xs-6"><img src="/w/images/thumb/e/e7/Shuffle_Mega_Speedup.png/24px-Shuffle_Mega_Speedup.png" />'+c.msu+'</div><div class="col-xs-1"><input class="shuffledex-edit" name="shuffledex-editmsu" type="checkbox" value="'+c.msu+'" /></div></div>',o+='<div class="row"><div class="col-4">超级进化效果</div><div class="col-8">'+d+"</div></div>",o+="</div>",o+="</div>"}),b=b.replace("{pkmnmega}",o);for(var p="",c=a.split(".")[0],q=0,r=0;;r++){var s=c+"."+("0"+r).slice(-2),t=pw.poketoru.getPokemonData(s);if(!t){if("025"==c&&r<40)continue;break}t.isMega||(p+='<a href="#" class="shuffledex-pkmnlink" data-pid="'+s+'"><img class="shufflepokemon" src="'+pw.poketoru.getPoketoruIconSrc(s)+'" data-pid="'+s+'" style="width:48px;" /></a>',q++)}q>1?(p='<h3 class="col-xs-12">所有形态</h3><div class="col-xs-12">'+p+"</div>",b=b.replace("{pkmnform}",p)):b=b.replace("{pkmnform}",""),poketoruDex.flip("pokemon"),$("#shuffledex-pokemontab").html(b),$("#shuffledex-pokemonpage").data("pid",a),$(".shuffledex-searchlink").click(function(){return $("#shuffledex-return").click(),$("#shuffledex-reset").click(),$("select[name=shuffledex-skill]").val($(this).data("skill")),$("#shuffledex-search").click(),!1}),$("#shuffledex-pokemonpage .shuffledex-pkmnlink").click(function(){return pw.poketoru.createPokemonPage($(this).data("pid").toString()),!1})},flip:function(a){$(".shuffledex__"+a+"nav").tab("show")},getTypeIndex:function(a){var b=-1;return b=$.inArray(a,pw.database.types.names["zh-cn"]),-1==b&&(b=$.inArray(a,["普","斗","飞","毒","地","岩","虫","鬼","钢","火","水","草","电","超","冰","龙","恶","妖"])),b},checkHash:function(){var a=window.location.hash.substring(1);if("."==a.substring(-1,1)&&(a=decodeURI(a.replace(/\./g,"%"))),a.match(/\d+\.\d+/))poketoruDex.createPokemonPage(a);else if("克制"==a.substring(-2,2)){var b=poketoruDex.getTypeIndex(a.substring(2));$("select[name=shuffledex-type]").val(b+100),$("#shuffledex-search").click()}else if(a.match(/skill\-\d+/)){var b=a.substring(6);$("select[name=shuffledex-skill]").val(b),$("#shuffledex-search").click()}else{var b=poketoruDex.getTypeIndex(a);b>-1&&($("select[name=shuffledex-type]").val(b),$("#shuffledex-search").click())}}},pokeWiki.loader.using(["pokemon.js","poketoru.js","poketoru.pokemon.js","bootstrap"],function(){poketoruDex.init()});