pw.loader.using(["pokemon.js","pokemon.7.js","bootstrap"],function(){function a(a){var b=$(a);return[parseInt(b[0].value,10),parseInt(b[1].value,10),parseInt(b[2].value,10),parseInt(b[5].value,10),parseInt(b[3].value,10),parseInt(b[4].value,10)]}function b(a,b){var c=$(a);c[0].value=b[0],c[1].value=b[1],c[2].value=b[2],c[3].value=b[4],c[4].value=b[5],c[5].value=b[3]}function c(){var a=1*$(".calc-nt1:checked").val()+1,b=1*$(".calc-nt2:checked").val()+1,c=[0,1,1,1,1,1];return a!=b&&(c[a]=1.1,c[b]=.9),[c[0],c[1],c[2],c[5],c[3],c[4]]}function d(){var d=parseInt($(".calc-level").val(),10),f=a(".calc-bs"),g=a(".calc-ev"),h=a(".calc-iv"),j=c(),k=[];for(i=0;i<=5;i++)k[i]=e(d,f[i],g[i],h[i],j[i]);b(".calc-stat",k)}function e(a,b,c,d,e){if(0==a)return 0;if(0==b)return 0;if(1==b)return 1;var f=0;return 0==e?f=Math.floor((2*b+d+Math.floor(c/4))*a/100+10+a):(f=Math.floor((2*b+d+Math.floor(c/4))*a/100+5),f=Math.floor(f*e)),f}function f(a,b){if($(".calc-selectForm").empty(),0==a)$(".calc-sprite").html("&nbsp;");else{var c=String("00").concat(a).slice(-3),d=String("00").concat(b||0).slice(-2),e=c+"."+d,f="";for(i=0;i<l[c];i++){var h=c+"."+String("00").concat(i).slice(-2),j=pw.util.getPokemonName(h);f+="<option value="+h+" >"+(j.form||j.name)+"</option>"}$(".calc-selectForm").html(f),g(e)}}function g(a){var c=parseInt(a.split(".")[0]);$(".calc-sprite").html('<a href="/wiki/'+pw.util.getPokemonName(c)+'" title="'+pw.util.getPokemonName(c)+'">'+pw.util.createPokemonImage("pgl",a,"width:80%;")+"</a>"),b(".calc-bs",pw.database.pokemon.data[7][a].basestats),d()}function h(a){b(".calc-ev",a.split("/")),d()}function j(a){a=parseInt(a);var b=[0,1,2,5,3,4];if(-1==a)$(".calc-nt1")[0].checked=!0,$(".calc-nt1")[0].checked=!1,$(".calc-nt2")[0].checked=!0,$(".calc-nt2")[0].checked=!1;else{var c=b[Math.floor(a/5)+1],e=b[a%5+1];$(".calc-nt1")[c-1].checked=!0,$(".calc-nt2")[e-1].checked=!0}d()}mw.util.addCSS(".pw-jscontent, .pw-jscontent input.form-control { text-align:center;}.calc-nt1,.calc-nt2 {display:none;}.calc-nt1+label,.calc-nt2+label{font-weight:bold;color:#ccc;border:1px solid #ccc;border-radius:24px;font-size:20px;line-height:100%;padding:3px;margin:0;font-family: monospace;vertical-align: middle;}.calc-nt1:checked+label{background:#f88;color:white;border-color:#f88;}.calc-nt2:checked+label{ background:#88f;color:white;border-color:#88f;}");var k=["-","勤奋","怕寂寞","勇敢","固执","顽皮","大胆","坦率","悠闲","淘气","乐天","胆小","急躁","认真","爽朗","天真","内敛","慢吞吞","冷静","害羞","马虎","温和","温顺","自大","慎重","浮躁"],l={};$.each(pw.database.pokemon.data[7],function(a,b){var c=a.split(".");l[c[0]]=1+(l[c[0]]||0)});var m='<div class="card border-primary shuffledex"><div class="card-header border-primary bg-primary"><div class="nav nav-tabs card-header-tabs">\t<a class="nav-item nav-link calc-tab active" data-toggle="tab" href="#calc-tab">能力值计算器</a></div></div><div class="card-body"><div class="container-fluid"><div class="tab-content"><div class="tab-pane fade show active" id="calc-tab"><div class="row">\t\t<div class="col-12 col-lg-3">\t\t<div class="form-group"><label>宝可梦</label></div>\t\t<div class="form-group row"><div class="col-12 calc-sprite"></div></div>\t\t<div class="form-group row">\t\t<div class="col-8"><select class="form-control calc-selectPokemon" /></div>\t\t<div class="col-4"><select class="form-control calc-selectForm" /></div>\t\t</div>\t\t</div>\t\t<div class="col-12 col-lg-9">\t\t<div class="form-group row"><label class="col-1">能力</label><label class="col-2">种族值</label><label class="col-2">个体值</label><label class="col-2">努力值</label><label class="col-2">性格</label><label class="col-3">能力值</label></div>'+function(){var a="";for(i=0;i<=5;i++)a+='<div class="form-group row"><label class="col-1">'+["HP","攻击","防御","特攻","特防","速度"][i]+'</label><div class="col-2"><input type="text" class="form-control calc-bs" value="0" maxlength="3"></div><div class="col-2"><input type="text" class="form-control calc-iv" value="31" maxlength="3"></div><div class="col-2"><input type="text" class="form-control calc-ev" value="0" maxlength="3"></div><div class="col-2">'+(0==i?"":'<input type="radio" class="form-check-input calc-nt1 " name="nature1" id="n1'+(i-1)+'" value="'+(i-1)+'"><label for="n1'+(i-1)+'">＋</label>　<input type="radio" class="form-check-input calc-nt2" id="n2'+(i-1)+'" name="nature2" value="'+(i-1)+'"><label for="n2'+(i-1)+'">－</label>')+'</div><div class="col-3"><input type="text" class="form-control calc-stat" value="0" maxlength="3"></div></div>';return a}()+'<div class="form-group row"><label class="col-1">等级</label><div class="col-2"><input type="text" class="form-control calc-level" value="1" maxlength="3"></div><div class="col-2"><select class="form-control calc-selectEV"><option value="0/0/0/0/0/0" selected>全0</option><option value="252/0/0/252/0/0">HP速度252</option><option value="0/252/0/0/252/0">攻击速度252</option><option value="0/0/0/252/252/0">特攻速度252</option><option value="252/0/252/0/0/0">HP防御252</option><option value="252/0/0/0/0/252">HP特防252</option><option value="0/0/252/0/0/252">防御特防252</option><option value="252/252/252/252/252/252">全满</option></select></div><div class="col-2"><select class="form-control calc-selectNature">'+function(){var a="";for(i=0;i<k.length;i++)a+='<option value="'+(i-1)+'">'+k[i]+"</option>";return a}()+"</select></div>";$(".pw-jscontent").html(m);var n=1,o=807,p='<option value="0" selected></option>';for(i=n;i<=o;i++)p+='<option value="'+i+'" >'+String("00").concat(i).slice(-3)+" "+pw.util.getPokemonName(i)+"</option>";$(".calc-selectPokemon").empty().html(p);var q=mw.util.getParamValue("pid");if(null!=q){var r=q.split(".");f(r[0],r[1]),$(".calc-selectPokemon").val(r[0]),$(".calc-selectForm").val(q)}else $(".calc-selectPokemon").val("001.00"),f(1);$(".calc-selectPokemon").change(function(){f(this.value)}),$(".calc-selectForm").change(function(){g(this.value)}),$(".calc-selectNature").change(function(){j(this.value)}),$(".calc-selectEV").change(function(){h(this.value)}),$(".pw-jscontent input").change(d)});