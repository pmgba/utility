pw.loader.using(["pokemon.js","pokemon.7.js","bootstrap"],function(){function a(a){return[a[0],a[1],a[2],a[4],a[5],a[3]]}function b(){var a=[0,1,1,1,1,1];for(i=0;i<=4&&(!m[i].checked||!n[i].checked);i++)m[i].checked&&(a[i+1]=1.1),n[i].checked&&(a[i+1]=.9);for(S=0;S<=5;S++)k[S].value=c(l.val(),g[S].value,h[S].value,j[S].value,0==S?0:a[S-1]);CreateURL()}function c(a,b,c,d,e){if(0==a)return 0;if(0==b)return 0;if(1==b)return 1;a=parseInt(a,10),b=parseInt(b,10),c=parseInt(c,10),d=parseInt(d,10);var f;return 0==e||void 0==e?f=Math.floor((2*b+d+Math.floor(c/4))*a/100+10+a):(f=Math.floor((2*b+d+Math.floor(c/4))*a/100+5),f=Math.floor(f*e)),f}mw.util.addCSS(".pw-jscontent, .pw-jscontent input.form-control { text-align:center;}.calc-nt1,.calc-nt2 {display:none;}.calc-nt1+label,.calc-nt2+label{font-weight:bold;color:#ccc;border:1px solid #ccc;border-radius:24px;font-size:20px;line-height:100%;padding:3px;margin:0;font-family: monospace;vertical-align: middle;}.calc-nt1:checked+label{background:#f88;color:white;border-color:#f88;}.calc-nt2:checked+label{ background:#88f;color:white;border-color:#88f;}");var d=["-","勤奋","怕寂寞","勇敢","固执","顽皮","大胆","坦率","悠闲","淘气","乐天","胆小","急躁","认真","爽朗","天真","内敛","慢吞吞","冷静","害羞","马虎","温和","温顺","自大","慎重","浮躁"],e=["0/0","0/0","0/1","0/4","0/2","0/3","1/0","0/0","1/4","1/2","1/3","4/0","4/1","0/0","4/2","4/3","2/0","2/1","2/4","0/0","2/3","3/0","3/1","3/4","3/2","0/0"],f='<div class="card border-primary shuffledex"><div class="card-header border-primary bg-primary"><div class="nav nav-tabs card-header-tabs">\t<a class="nav-item nav-link calc-tab active" data-toggle="tab" href="#calc-tab">能力值计算器</a></div></div><div class="card-body"><div class="container-fluid"><div class="tab-content"><div class="tab-pane fade show active" id="calc-tab"><div class="row">\t\t<div class="col-12 col-lg-3">\t\t<div class="form-group"><label>宝可梦</label></div>\t\t<div class="form-group row"><div class="col-12 calc-sprite"></div></div>\t\t<div class="form-group row">\t\t<div class="col-8"><select class="form-control calc-selectPokemon" /></div>\t\t<div class="col-4"><select class="form-control calc-selectForm" /></div>\t\t</div>\t\t</div>\t\t<div class="col-12 col-lg-9">\t\t<div class="form-group row"><label class="col-1">能力</label><label class="col-2">种族值</label><label class="col-2">个体值</label><label class="col-2">努力值</label><label class="col-2">性格</label><label class="col-3">能力值</label></div>'+function(){var a="";for(i=0;i<=5;i++)a+='<div class="form-group row"><label class="col-1">'+["HP","攻击","防御","特攻","特防","速度"][i]+'</label><div class="col-2"><input type="text" class="form-control calc-bs" value="0" maxlength="3"></div><div class="col-2"><input type="text" class="form-control calc-iv" value="31" maxlength="3"></div><div class="col-2"><input type="text" class="form-control calc-ev" value="0" maxlength="3"></div><div class="col-2">'+(0==i?"":'<input type="radio" class="form-check-input calc-nt1 " name="nature1" id="n1'+(i-1)+'" value="'+(i-1)+'"><label for="n1'+(i-1)+'">＋</label>　<input type="radio" class="form-check-input calc-nt2" id="n2'+(i-1)+'" name="nature2" value="'+(i-1)+'"><label for="n2'+(i-1)+'">－</label>')+'</div><div class="col-3"><input type="text" class="form-control calc-stat" value="0" maxlength="3"></div></div>';return a}()+'<div class="form-group row"><label class="col-1">等级</label><div class="col-2"><input type="text" class="form-control calc-level" value="1" maxlength="3"></div><div class="col-2"><select class="form-control calc-selectEV"><option value="0/0/0/0/0/0" selected>全0</option><option value="252/0/0/0/0/252">HP速度252</option><option value="0/252/0/0/0/252">攻击速度252</option><option value="0/0/0/252/0/252">特攻速度252</option><option value="252/0/252/0/0/0">HP防御252</option><option value="252/0/0/0/252/0">HP特防252</option><option value="0/0/252/0/252/0">防御特防252</option><option value="252/252/252/252/252/252">全满</option></select></div><div class="col-2"><select class="form-control calc-selectNature">'+function(){var a="";for(i=0;i<d.length;i++)a+='<option value="'+e[i]+'">'+d[i]+"</option>";return a}()+"</select></div>";$(".pw-jscontent").html(f),$("tr.advance").hide();var g=$(".calc-bs"),h=$(".calc-ev"),j=$(".calc-iv"),k=$(".calc-stat"),l=$(".calc-level"),m=$(".calc-nt1"),n=$(".calc-nt2"),o={};if($.each(pw.database.pokemon.data[7],function(a,b){var c=a.split(".");o[c[0]]=1+(o[c[0]]||0)}),SelectGen=function(a){var b=1,c=807,d='<option value="0" selected></option>';for(i=b;i<=c;i++)d+='<option value="'+i+'" >'+String("00").concat(i).slice(-3)+" "+pw.util.getPokemonName(i)+"</option>";$(".calc-selectPokemon").empty().html(d),SelectPokemon(1)},SelectPokemon=function(a){if($(".calc-selectForm").empty(),0==a)$(".calc-sprite").html("&nbsp;");else{var b=String("00").concat(a).slice(-3),c="";for(i=0;i<o[b];i++){var d=b+"."+String("00").concat(i).slice(-2),e=pw.util.getPokemonName(d);c+="<option value="+d+" >"+(e.form||e.name)+"</option>"}$(".calc-selectForm").html(c),SelectForm(b.concat(".00"))}},SelectForm=function(c){var d=parseInt(c.split(".")[0]);$(".calc-sprite").html('<a href="/wiki/'+pw.util.getPokemonName(d)+'" title="'+pw.util.getPokemonName(d)+'">'+pw.util.createPokemonImage("pgl",c,"width:80%;")+"</a>");var e=a(pw.database.pokemon.data[7][c].basestats);for(i=0;i<=5;i++)g[i].value=e[i];b()},SelectEVs=function(a){var c=a.split("/");for(i=0;i<=5;i++)h[i].value=c[i];b()},SelectNature=function(a){var c=a.split("/");if(c[0]==c[1])for(i=0;i<=4;i++)m[i].checked=!1,n[i].checked=!1;else m[c[0]].checked=!0,n[c[1]].checked=!0;b()},CreateURL=function(){return""},window.location.href.indexOf("/w/")>1){var p=mw.util.getParamValue("plv");null!=p&&l.val(p);var q=mw.util.getParamValue("ps");if(null!=q)for(var r=q.split(","),s=0;s<=5;s++)k[s].value=r[s];var t=mw.util.getParamValue("pev");if(null!=t)for(var u=t.split(","),s=0;s<=5;s++)h[s].value=u[s];var v=mw.util.getParamValue("pn");if(null!=v){var w=v.split(",");v[0]>0&&(m[w[0]-1].checked=!0),v[1]>0&&(n[w[1]-1].checked=!0)}var x=mw.util.getParamValue("ph");null!=x&&($("#HPType")[0].selectedIndex=x);var y=mw.util.getParamValue("pc");null!=y&&($("#Characteristic")[0].selectedIndex=y);var z=mw.util.getParamValue("psiv");null!=z&&($("#SumIVs")[0].selectedIndex=z);var A=mw.util.getParamValue("phiv");null!=A&&($("#HighestIV")[0].selectedIndex=A);var B=mw.util.getParamValue("phiv2");if(null!=B)for(var s=0;s<=5;s++)$(".Highest")[s].checked=1==B[s];var C=mw.util.getParamValue("pid");null!=C&&($("#pokemon")[0].selectedIndex=C,SelectPokemon(C))}SelectGen(0),$(".calc-selectPokemon").change(function(){SelectPokemon(this.value)}),$(".calc-selectForm").change(function(){SelectForm(this.value)}),$(".calc-selectNature").change(function(){SelectNature(this.value)}),$(".calc-selectEV").change(function(){SelectEVs(this.value)}),$(".pw-jscontent input").change(b)});